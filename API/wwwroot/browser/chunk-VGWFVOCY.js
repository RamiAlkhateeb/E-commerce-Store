import{a as x}from"./chunk-CGUWAAPM.js";import{P as $,b as m,c as h,d as b,e as P,f as N,g as C,i as y,l as S,o as V,p as F}from"./chunk-HDRMHIVV.js";import{A as j,Aa as D,Ba as G,C as I,Ca as A,Da as q,Ea as k,Fa as n,Ga as a,Ha as l,I as c,Ia as f,Jb as U,Ta as g,Va as _,Vb as B,Xb as v,_b as w,eb as p,ga as r,gb as L,ma as s,oa as u,pa as d,r as R,x as E,y as T}from"./chunk-2X7YOW7U.js";var z=(()=>{class e{constructor(t,i,o){this.accountService=t,this.router=i,this.activatedRoute=o,this.loginForm=new P({email:new N("",[m.required,m.email]),password:new N("",m.required)}),this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop"}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:t=>this.router.navigateByUrl(this.returnUrl)})}static{this.\u0275fac=function(i){return new(i||e)(s(x),s(v),s(B))}}static{this.\u0275cmp=u({type:e,selectors:[["app-login"]],standalone:!1,decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","type","label"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return o.onSubmit()}),a(3,"div",3)(4,"h1",4),p(5,"Login"),l()(),f(6,"app-text-input",5)(7,"app-text-input",6),a(8,"div",7)(9,"button",8),p(10,"Sign in"),l()()()()()),i&2&&(r(2),n("formGroup",o.loginForm),r(4),n("formControl",o.loginForm.controls.email)("label","Email address"),r(),n("formControl",o.loginForm.controls.password)("type","password")("label","Password"),r(2),n("disabled",o.loginForm.invalid))},dependencies:[C,h,b,y,S,F],encapsulation:2})}}return e})();function Y(e,J){if(e&1&&(a(0,"li"),p(1),l()),e&2){let t=_(2);r(),L(" ",t.errors," ")}}function ee(e,J){if(e&1&&(a(0,"ul",7),q(1,Y,2,1,"li",null,A),l()),e&2){let t=_();r(),k(t.errors)}}var Z=(()=>{class e{constructor(t,i,o){this.fb=t,this.accountService=i,this.router=o,this.errors=null,this.complexPassword="(?=^.{6,10}$)(?=.*d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*s).*$",this.registerForm=this.fb.group({displayName:["",m.required],email:["",[m.required,m.email],[this.validateEmailNotTaken()]],password:["",[m.required]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>this.router.navigateByUrl("/shop"),error:t=>this.errors=t.errors})}validateEmailNotTaken(){return t=>t.valueChanges.pipe(E(1e3),T(1),I(()=>this.accountService.checkEmailExists(t.value).pipe(R(i=>i?{emailExists:!0}:null),j(()=>t.markAsTouched()))))}static{this.\u0275fac=function(i){return new(i||e)(s(V),s(x),s(v))}}static{this.\u0275cmp=u({type:e,selectors:[["app-register"]],standalone:!1,decls:13,vars:10,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","type","label"],[1,"text-danger","list-unstyled"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return o.onSubmit()}),a(3,"div",3)(4,"h1",4),p(5,"Sign up"),l()(),f(6,"app-text-input",5)(7,"app-text-input",5)(8,"app-text-input",6),D(9,ee,3,0,"ul",7),a(10,"div",8)(11,"button",9),p(12,"Sign up"),l()()()()()),i&2&&(r(2),n("formGroup",o.registerForm),r(4),n("formControl",o.registerForm.controls.displayName)("label","Display Name"),r(),n("formControl",o.registerForm.controls.email)("label","Email address"),r(),n("formControl",o.registerForm.controls.password)("type","password")("label","Password"),r(),G(o.errors?9:-1),r(2),n("disabled",o.registerForm.invalid))},dependencies:[C,h,b,y,S,F],encapsulation:2})}}return e})();var te=[{path:"login",component:z},{path:"register",component:Z}],H=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=c({imports:[w.forChild(te),w]})}}return e})();var be=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=c({imports:[U,H,$]})}}return e})();export{be as a};
