<div class="container py-5">
  
  @if ((basketService.basketSource$ | async) === null) {
    <div class="text-center py-5">
      <i class="fa fa-shopping-basket fa-4x text-muted mb-4 opacity-25"></i>
      <h3 class="fw-bold">Your basket is empty</h3>
      <p class="text-muted mb-4">Looks like you haven't added any 3D prints yet.</p>
      <a routerLink="/shop" class="btn btn-dark rounded-pill px-5 py-2">Start Shopping</a>
    </div>
  }

  @if ((basketService.basketSource$ | async); as basket) {
    <div class="row g-4">
      
      <div class="col-12 col-lg-8">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2 class="fw-bold mb-0">Shopping Cart</h2>
          <span class="text-muted">{{basket.items.length}} items</span>
        </div>

        <div class="bg-white rounded-4 shadow-sm p-3 mb-4">
          <app-basket-summary
            (addItem)="incrementQuantity($event)"
            (removeItem)="removeItem($event)">
          </app-basket-summary>
        </div>
      </div>

      <div class="col-12 col-lg-4">
        <div class="sticky-top" style="top: 20px; z-index: 1;">
          <div class="bg-light rounded-4 p-4 shadow-sm border-0">
            <h4 class="fw-bold mb-4">Order Summary</h4>
            
            <app-order-totals></app-order-totals>
            
            <hr class="my-4 text-muted opacity-25">
            
            <a routerLink="/checkout" class="btn btn-dark w-100 py-3 rounded-pill fw-bold shadow-lg">
              Proceed to Checkout
            </a>
            
            <div class="mt-3 text-center">
              <small class="text-muted"><i class="fa fa-lock me-1"></i> Secure Checkout</small>
            </div>
          </div>
        </div>
      </div>

    </div>
  }
</div>